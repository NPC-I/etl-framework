# ============================================
# ETL Framework - Comprehensive Environment Configuration
# ============================================
# Copy this file to .env and adjust values for your environment
# NEVER commit .env to version control!
# ============================================
# DATABASE CONFIGURATION
# ============================================
# Database Type: sqlite, postgresql, mysql
ETL_DB_TYPE=sqlite

# SQLite Configuration (only for ETL_DB_TYPE=sqlite)
ETL_DB_FILE=data/etl_database.db

# PostgreSQL Configuration (only for ETL_DB_TYPE=postgresql)
# ETL_DB_HOST=localhost
# ETL_DB_PORT=5432
# ETL_DB_NAME=etl_database
# ETL_DB_USER=etl_user
# ETL_DB_PASSWORD=etl_password

# MySQL Configuration (only for ETL_DB_TYPE=mysql)
# ETL_DB_HOST=localhost
# ETL_DB_PORT=3306
# ETL_DB_NAME=etl_database
# ETL_DB_USER=etl_user
# ETL_DB_PASSWORD=etl_password

# ============================================
# DEFAULT BEHAVIORS
# ============================================
# Default extractor: pdf, csv, excel
ETL_DEFAULT_EXTRACTOR=csv

# Default loader: sql, file
ETL_DEFAULT_LOADER=file

# Default loading strategy: fail, replace, append, update, upsert
ETL_DEFAULT_STRATEGY=replace

# Default key columns for update/upsert strategies (comma-separated)
# ETL_KEY_COLUMNS=id,order_date

# Batch size for database operations
ETL_BATCH_SIZE=1000

# ============================================
# LOGGING CONFIGURATION
# ============================================
# Log level: DEBUG, INFO, WARNING, ERROR
ETL_LOG_LEVEL=INFO

# Log file path (empty for console only)
ETL_LOG_FILE=logs/etl.log

# ============================================
# COLUMN MAPPING
# ============================================
# Default column mapping: generic, roller_door
ETL_COLUMN_MAPPING=generic

# ============================================
# ADVANCED CONFIGURATION
# ============================================
# Chunk size for file processing
ETL_CHUNK_SIZE=500

# Create index on key columns (for databases)
ETL_CREATE_INDEX=false

# Drop duplicates during loading
ETL_DROP_DUPLICATES=true

# ============================================
# SECURITY CONFIGURATION
# ============================================
# Security Level: development, testing, staging, production
ETL_SECURITY_LEVEL=development

# Enable/disable security features
ETL_SECURITY_ENABLED=true

# Data Encryption
ETL_ENCRYPTION_ENABLED=true
ETL_ENCRYPTION_KEY=demo-encryption-key-12345-change-in-production

# Role-Based Access Control (RBAC)
ETL_RBAC_ENABLED=true
# Format: username:role1,role2;username2:role3
ETL_USERS=admin:admin;operator:operator;viewer:viewer;auditor:auditor;data_steward:data_steward
ETL_SESSION_TIMEOUT=60  # minutes

# Audit Logging
ETL_AUDIT_LOGGING_ENABLED=true
ETL_AUDIT_LOG_FILE=logs/audit.log
ETL_AUDIT_RETENTION_DAYS=365
ETL_LOG_SENSITIVE_OPERATIONS=false

# Input Validation
ETL_MAX_FILE_SIZE_MB=10
ETL_MAX_JSON_DEPTH=10
ETL_MAX_CALCULATIONS=50

# Network Security
ETL_ALLOW_INSECURE_CONNECTIONS=true  # false for production
ETL_REQUIRE_TLS=false  # true for production
# Comma-separated list of allowed IP ranges
ETL_ALLOWED_IP_RANGES=127.0.0.1,localhost

# Security Scanning
ETL_SECURITY_SCAN_INTERVAL=86400  # 24 hours in seconds
ETL_VULNERABILITY_ALERT_EMAIL=security@example.com

# File Permissions
ETL_FILE_UMASK=0077  # Restrict file permissions
ETL_DIRECTORY_UMASK=0077  # Restrict directory permissions

# Logging Security
ETL_LOG_SENSITIVE_DATA=false  # Never log passwords or secrets

# Rate Limiting
ETL_RATE_LIMIT_REQUESTS=100  # requests per minute
ETL_RATE_LIMIT_WINDOW=60  # seconds

# Backup Security
ETL_BACKUP_ENCRYPTION=true
ETL_BACKUP_RETENTION_DAYS=30
ETL_BACKUP_LOCATION=backups

# Monitoring
ETL_MONITORING_ENABLED=true
ETL_ALERT_ON_SECURITY_EVENTS=true
ETL_SECURITY_TEAM_EMAIL=security-alerts@example.com

# Demo-specific settings (disable in production)
ETL_DEMO_MODE=true
ETL_ALLOW_DEMO_OPERATIONS=true
ETL_DEMO_ENCRYPTION_KEY=demo-only-key-do-not-use-in-production

# ============================================
# EXAMPLE CONFIGURATIONS
# ============================================
# Example 1: PostgreSQL with UPSERT for daily updates
# ETL_DB_TYPE=postgresql
# ETL_DB_HOST=localhost
# ETL_DB_PORT=5432
# ETL_DB_NAME=production_db
# ETL_DB_USER=app_user
# ETL_DB_PASSWORD=secure_password_here
# ETL_DEFAULT_EXTRACTOR=csv
# ETL_DEFAULT_LOADER=sql
# ETL_DEFAULT_STRATEGY=upsert
# ETL_KEY_COLUMNS=order_id,customer_email
# ETL_BATCH_SIZE=5000
# ETL_LOG_LEVEL=INFO
# ETL_LOG_FILE=/var/log/etl_framework.log
# ETL_SECURITY_LEVEL=production
# ETL_ENCRYPTION_ENABLED=true
# ETL_RBAC_ENABLED=true
# ETL_USERS=admin:admin;operator:operator;viewer:viewer
# ETL_AUDIT_LOGGING_ENABLED=true
# ETL_AUDIT_LOG_FILE=/var/log/etl_audit.log

# Example 2: SQLite for local development
# ETL_DB_TYPE=sqlite
# ETL_DB_FILE=development.db
# ETL_DEFAULT_EXTRACTOR=pdf
# ETL_DEFAULT_LOADER=file
# ETL_DEFAULT_STRATEGY=append
# ETL_LOG_LEVEL=DEBUG
# ETL_LOG_FILE=
# ETL_SECURITY_LEVEL=development
# ETL_ENCRYPTION_ENABLED=false
# ETL_RBAC_ENABLED=false
# ETL_AUDIT_LOGGING_ENABLED=false

# Example 3: MySQL with UPDATE strategy
# ETL_DB_TYPE=mysql
# ETL_DB_HOST=db.example.com
# ETL_DB_PORT=3306
# ETL_DB_NAME=analytics
# ETL_DB_USER=analytics_user
# ETL_DB_PASSWORD=another_password
# ETL_DEFAULT_STRATEGY=update
# ETL_KEY_COLUMNS=id
# ETL_BATCH_SIZE=10000
# ETL_LOG_LEVEL=WARNING
# ETL_SECURITY_LEVEL=staging
# ETL_ENCRYPTION_ENABLED=true
# ETL_RBAC_ENABLED=true
# ETL_USERS=admin:admin;operator:operator
# ETL_AUDIT_LOGGING_ENABLED=true

# ============================================
# IMPORTANT SECURITY NOTES
# ============================================
#
# 1. NEVER commit this file to version control
# 2. Use different encryption keys for different environments
# 3. Rotate encryption keys regularly (every 90 days recommended)
# 4. Use strong, randomly generated passwords
# 5. Restrict file permissions on configuration files
# 6. Monitor audit logs regularly
# 7. Keep dependencies updated with security patches
# 8. Conduct regular security reviews and penetration testing
# 9. Follow principle of least privilege for user accounts
# 10. Encrypt sensitive data at rest and in transit